
<!DOCTYPE html>
<html>
<head>
  <title>Geburtstagsquiz</title>
  <link rel="stylesheet" href="../../index.css">
</head>
<body>

  <style>
    a.preview-image-a{
      width: 200px; 
      height: 150px; 
      overflow: hidden; 
      background-color: lightgreen; 
      box-shadow: inset 1px 1px 0px black;
      position: relative;
    }
    .preview-image-image{
      opacity: 0;
      width: 200px; 
      height: 150px; 
      object-fit: none; 
    }
    input{
      height: 40px;
       border-radius: 12px;
       width: 256px;
    }
    a.preview-image-a:has(img.disable){
      pointer-events: none;
      background-color: lightgray;
    }
  </style>

<div class="page-padding">
  <h2 style="margin: 12px 0 0 0">
    Alles gute zum Geburtstag!
  </h2>
  <p style="margin: 12px 0 0 0">
    Löse alle quizfelder, um dein Geschenk zu sehen.
  </p>
  <p style="margin: 4px 0 0 0">
    Falls du denkst, dein Geschenk erraten zu haben, kannst du das Wort unten eingeben und schauen, ob es richtig ist.
  </p>
  <button onclick="resetProgress()" class="quiz-button" style="display: none;">
    Reset
  </button>
  <div style="border-right: 1px solid black; border-bottom: 1px solid black; width: fit-content; margin-top: 16px;">
    <div style="display: flex; width: fit-content;">
      <a class="preview-image-a" href="../quiz.html?id=1">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: 0 0;" id="quiz1"/>
      </a>
      <a  class="preview-image-a" href="../quiz.html?id=2">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -200px 0;" id="quiz2"/>
      </a>
      <a  class="preview-image-a" href="../quiz.html?id=3">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -400px 0;" id="quiz3"/>
      </a>
      <a  class="preview-image-a" href="../quiz.html?id=4">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -600px 0;" id="quiz4"/>
      </a>
    </div>
    <div style="display: flex; width: fit-content;">
      <a class="preview-image-a" href="../quiz.html?id=5">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: 0 -150px;" id="quiz5"/>
      </a>
      <a class="preview-image-a" href="../quiz.html?id=6">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -200px -150px;" id="quiz6"/>
      </a>
      <a class="preview-image-a" href="../quiz.html?id=7">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -400px -150px;" id="quiz7"/>
      </a>
      <a class="preview-image-a" href="../quiz.html?id=8">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -600px -150px;" id="quiz8"/>
      </a>
    </div>
    <div style="display: flex; width: fit-content;">
      <a class="preview-image-a" href="../quiz.html?id=9">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: 0 -300px;" id="quiz9"/>
      </a>
      <a class="preview-image-a" href="../quiz.html?id=10">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -200px -300px;" id="quiz10"/>
      </a>
      <a class="preview-image-a" href="../quiz.html?id=11">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -400px -300px;" id="quiz11"/>
      </a>
      <a class="preview-image-a" href="../quiz.html?id=12">
        <img src="../f32r3jkgfsjvsdgjleins.png" class="preview-image-image" style="object-position: -600px -300px;" id="quiz12"/>
      </a>
    </div>
  </div>
  <div class="horizontal-stack" style="margin-top: 12px;">
    <input preview="Lösung" id="solution">
    <button onclick="checkSolution()" class="quiz-button">
      Prüfen
    </button>
  </div>
</div>

<script>
function checkSolution(){
  let solution = document.getElementById("solution").value;
  if(solution == "gornergratbahn" ||
   solution == "Gornergratbahn" || 
   solution == "Gornergrat-Bahn" || 
   solution == "Gornergrat-bahn" || 
   solution == "gornergrat-bahn"){
    for (let i = 1; i < 13; i++) {
      localStorage.setItem("quiz" + i + "_progress", 100);
    }
    loadProgress();
  }
  else{
    alert("Oh man, das war schlecht...");
  }
}

function resetProgress() {
  for (let i = 1; i < 13; i++) {
    localStorage.setItem("quiz" + i + "_progress", 0);
  }
  loadProgress();
}

async function loadProgress() {
  let foundActive = false;
  for (let i = 1; i < 13; i++) {
    let progress = parseInt(localStorage.getItem("quiz" + i + "_progress")) || 0;
    console.log(progress);
    let max = parseInt(localStorage.getItem("quiz" + i + "_max")) || 10;
    let ratio = progress / max;
    let element = document.getElementById("quiz" + i);
    element.style.opacity = ratio;
    element.setAttribute('draggable', false);
    if(ratio < 1){
      if(foundActive){
        element.classList.add("disable");
      }
      foundActive = true;
    }
    if(ratio ==1){
        element.classList.add("no-text");
    }
  }
}

loadProgress();
</script>
</body>
</html>