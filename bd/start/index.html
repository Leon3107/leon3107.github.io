
<!DOCTYPE html>
<html>
<head>
  <title>Geburtstagsquiz</title>
  <link rel="stylesheet" href="../../index.css">
</head>
<body>

  <style>
    .preview-image-a{
      width: 200px; 
      height: 200px; 
      overflow: hidden; 
      background-color: lightgreen; 
      box-shadow: inset 1px 1px 0px black;
    }
    .preview-image-image{
      opacity: 0;
      width: 200px; 
      height: 200px; 
      object-fit: none; 
    }
    a>img.disable{
      pointer-events: none;
      background-color: lightgray;
    }
  </style>

<div class="page-padding">
  <h1>
    Hallo, Mama.
  </h1>
  <button onclick="resetProgress()" class="quiz-button">
    Reset
  </button>
  <div style="border-right: 1px solid black; border-bottom: 1px solid black; width: fit-content; margin-top: 16px;">
    <div style="display: flex; width: fit-content;">
      <a class="preview-image-a" href="../quiz.html?id=1">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: 0 0;" id="quiz1"/>
      </a>
      <a  class="preview-image-a" href="../quiz.html?id=2">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -200px 0;" id="quiz2"/>
      </a>
      <a  class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -400px 0;" id="quiz3"/>
      </a>
      <a  class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -600px 0;" id="quiz4"/>
      </a>
    </div>
    <div style="display: flex; width: fit-content;">
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: 0 -200px;" id="quiz5"/>
      </a>
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -200px -200px;" id="quiz6"/>
      </a>
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -400px -200px;" id="quiz7"/>
      </a>
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -600px -200px;" id="quiz8"/>
      </a>
    </div>
    <div style="display: flex; width: fit-content;">
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: 0 -400px;" id="quiz9"/>
      </a>
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -200px -400px;" id="quiz10"/>
      </a>
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -400px -400px;" id="quiz11"/>
      </a>
      <a class="preview-image-a" href="/">
        <img src="../f32r3jkgfsjvsdgjlein.jpg" class="preview-image-image" style="object-position: -600px -400px;" id="quiz12"/>
      </a>
    </div>
  </div>
  <div class="horizontal-stack">
    <input preview="Lösung" id="solution">
    <button onclick="checkSolution()" class="quiz-button">
      Prüfen
    </button>
  </div>
</div>

<script>
const quizzes = [
  { id: "quiz1", title: "Quiz 1" },
  { id: "quiz2", title: "Quiz 2" },
  { id: "quiz3", title: "Quiz 3" },
];

function checkSolution(){
  let solution = document.getElementById("solution").value;
  if(solution == "gornergratbahn" || solution == "Gornergratbahn"){
    for (let i = 1; i < 13; i++) {
      localStorage.setItem("quiz" + i + "_progress", 100);
    }
    loadProgress();
  }
  else{
    alert("Oh man, das war schlecht...");
  }
}

function resetProgress() {
  for (let i = 1; i < 13; i++) {
    localStorage.setItem("quiz" + i + "_progress", 0);
  }
  loadProgress();
}

async function loadProgress() {
  let foundActive = false;
  for (let i = 1; i < 13; i++) {
    let progress = parseInt(localStorage.getItem("quiz" + i + "_progress")) || 0;
    console.log(progress);
    let max = parseInt(localStorage.getItem("quiz" + i + "_max")) || 10;
    let ratio = progress / max;
    let element = document.getElementById("quiz" + i);
    element.style.opacity = ratio;
    if(ratio < 1){
      if(!foundActive){
        element.classList.add("disable");
      }
      foundActive = true;
    }
  }
}

loadProgress();
</script>
</body>
</html>