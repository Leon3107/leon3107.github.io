
<!DOCTYPE html>
<html>
<head>
  <title>Geburtstagsquiz</title>
  <link rel="stylesheet" href="../index.css">
</head>
<body>

<div class="page-padding">
  <h1 id="quiz-title"></h1>
  <a href="start/index.html" style="text-decoration: underline;">ZurÃ¼ck</a>
  <div id="progress"></div>
  <div id="quiz"></div>
</div>

<script>const quizData = {
  quiz1: [
    { q: "2+2?", a: "4", options: ["3","4","5"] },
    { q: "3*3?", a: "9", options: ["6","9","12"] }
  ],
  quiz2: [
    { q: "Hauptstadt von Italien?", a: "Rom", options: ["Rom","Paris","Berlin"] },
    { q: "5+7?", a: "12", options: ["11","12","13"] }
  ]
};

// URL-Parameter auslesen
const params = new URLSearchParams(window.location.search);
const quizId = "quiz" + params.get("id");

// Sicherstellen, dass Quiz existiert
if (!quizData[quizId]) {
  document.body.innerHTML = "<p>Quiz nicht gefunden.</p>";
  throw new Error("UngÃ¼ltiges Quiz");
}

const questions = quizData[quizId];
const max = questions.length;
localStorage.setItem(quizId + "_max", max);

// Lade Fortschritt (wie viele Fragen schon korrekt beantwortet)
let progress = parseInt(localStorage.getItem(quizId + "_progress")) || 0;

// Titel setzen
document.getElementById("quiz-title").textContent = quizId.toUpperCase();


function renderQuestion() {
  if (progress >= max) {
    // Fertig â†’ zurÃ¼ck zur Startseite
    window.location.href = "start/index.html";
    return;
  }

  const q = questions[progress];

  // Fortschrittsanzeige
  document.getElementById("progress").innerHTML = `
    <progress style="margin: 12px 0 0 0" value="${progress}" max="${max}"></progress>
    <p style="margin: 0"><b>Frage ${progress + 1} von ${max}</b></p>
  `;

  // Frage + Antwortoptionen
  let optionsHtml = q.options.map((opt, i) => `
    <label  class="answer-label" style="display:block;margin:4px 0;">
      <input type="radio" class="answer" name="answer" value="${opt}">
      ${opt}
    </label>
  `).join("");

  document.getElementById("quiz").innerHTML = `
    <h2>${q.q}</h2>
    ${optionsHtml}
    <button onclick="checkAnswer()" class="quiz-button">Antwort prÃ¼fen</button>
  `;
}

function checkAnswer() {
  const selected = document.querySelector('input[name="answer"]:checked');
  if (!selected) {
    alert("Bitte eine Antwort auswÃ¤hlen!");
    return;
  }

  const userAnswer = selected.value;
  const correctAnswer = questions[progress].a;

  if (userAnswer === correctAnswer) {
    progress++;
    localStorage.setItem(quizId + "_progress", progress);

    if (progress >= max) {
      alert("Alle Fragen geschafft ðŸŽ‰");
      window.location.href = "start/index.html";
    } else {
      renderQuestion();
    }
  } else {
    alert("Falsch, versuch's nochmal!");
  }
}

renderQuestion();
</script>
</body>
</html>